## [151. 反转字符串中的单词](https://leetcode.cn/problems/reverse-words-in-a-string/)

给你一个字符串 `s` ，请你反转字符串中 **单词** 的顺序。

**单词** 是由非空格字符组成的字符串。`s` 中使用至少一个空格将字符串中的 **单词** 分隔开。

返回 **单词** 顺序颠倒且 **单词** 之间用单个空格连接的结果字符串。

**注意：**输入字符串 `s`中可能会存在前导空格、尾随空格或者单词间的多个空格。返回的结果字符串中，单词间应当仅用单个空格分隔，且不包含任何额外的空格。

 

**示例 1：**

```
输入：s = "the sky is blue"
输出："blue is sky the"
```

**示例 2：**

```
输入：s = "  hello world  "
输出："world hello"
解释：反转后的字符串中不能存在前导空格和尾随空格。
```

**示例 3：**

```
输入：s = "a good   example"
输出："example good a"
解释：如果两个单词间有多余的空格，反转后的字符串需要将单词间的空格减少到仅有一个。
```

```java
class Solution {

    /**
     * 主方法，用于反转字符串中的每个单词，步骤包括去除多余空格、反转整个字符串和反转每个单词。
     * 
     * @param s 输入的字符串
     * @return 返回反转后的字符串
     */
    public String reverseWords(String s) {
        // 1. 去除多余空格，返回处理后的StringBuilder
        StringBuilder rever = removeSpace(s);
        
        // 2. 反转整个字符串
        reverse(rever, 0, rever.length() - 1);
        
        // 3. 反转每个单词
        reverseEachword(rever);
        
        // 4. 返回最终处理后的字符串
        return rever.toString();
    }

    /**
     * 去除输入字符串中的多余空格（包括首尾的空格和中间的多余空格）。
     * 
     * @param s 输入字符串
     * @return 去除多余空格后的StringBuilder对象
     */
    public StringBuilder removeSpace(String s) {
        int start = 0;
        int end = s.length() - 1;
        
        // 跳过字符串开头的空格
        while (s.charAt(start) == ' ') start++;
        
        // 跳过字符串末尾的空格
        while (s.charAt(end) == ' ') end--;
        
        // 创建一个StringBuilder来存储处理后的字符串
        StringBuilder sb = new StringBuilder();
        
        // 遍历字符串，去除多余空格
        while (start <= end) {
            char ch = s.charAt(start);
            
            // 如果当前字符是空格且sb的最后一个字符不是空格，则添加当前空格
            // 如果当前字符不是空格，直接添加到sb中
            if (ch != ' ' || sb.charAt(sb.length() - 1) != ' ') {
                sb.append(ch);
            }
            
            // 移动到下一个字符
            start++;
        }
        
        // 返回去除多余空格后的结果
        return sb;
    }

    /**
     * 反转指定区间的字符，即反转[start, end]之间的字符。
     * 
     * @param sb 需要反转的StringBuilder对象
     * @param start 区间开始的索引
     * @param end 区间结束的索引
     */
    public void reverse(StringBuilder sb, int start, int end) {
        // 使用双指针从两端向中间交换字符
        while (start < end) {
            // 交换start和end指向的字符
            char c = sb.charAt(start);
            sb.setCharAt(start, sb.charAt(end));
            sb.setCharAt(end, c);
            
            // 移动指针，逐步向中间靠拢
            start++;
            end--;
        }
    }

    /**
     * 反转字符串中的每个单词。假设整个字符串已被反转，单词的顺序也就被反转了，
     * 所以这里只需要反转每个单词来恢复它们的原始顺序。
     * 
     * @param sb 已处理的StringBuilder，包含反转整个字符串后的内容
     */
    public void reverseEachword(StringBuilder sb) {
        int start = 0;
        int end = 1;  // end指向下一个字符
        
        int len = sb.length();
        
        // 遍历字符串，反转每个单词
        while (start < len) {
            // 找到单词的结束位置，即空格或字符串结束
            while (end < len && sb.charAt(end) != ' ') {
                end++;
            }
            
            // 反转当前单词（[start, end-1]区间）
            reverse(sb, start, end - 1);
            
            // 更新start和end，指向下一个单词
            start = end + 1;
            end = start + 1;
        }
    }
}

```