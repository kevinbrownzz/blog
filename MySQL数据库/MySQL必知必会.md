---
title: MySQL必知必会 阅读笔记
date: 2024-3-1 13:31:40
type: 数据库
categories: 数据库
cover: https://img9.doubanio.com/view/subject/l/public/s5968156.jpg
---
# MySQL必知必会 阅读笔记
### 1.主键概念
表中的任何列都可以作为主键，只要它满足以下条件：

❑ 任意两行都不具有相同的主键值；

❑ 每个行都必须具有一个主键值（主键列不允许NULL值）

表中的任何列都可以作为主键，只要它满足以下条件：❑ 任意两行都不具有相同的主键值；❑ 每个行都必须具有一个主键值（主键列不允许NULL值）

主键的最好习惯 除MySQL强制实施的规则外，应该坚持的几个普遍认可的最好习惯为：❑ 不更新主键列中的值；❑ 不重用主键列的值；❑ 不在主键列中使用可能会更改的值
### 2.databases和tables的选择
```sql
show databases  

show tables;    
show columns from 表名 == describe 表明
```
❑ SHOW STATUS，用于显示广泛的服务器状态信息；  
❑ SHOW CREATE DATABASE和SHOW CREATE TABLE，分别用来显示创建特定数据库或表的MySQL语句；  
❑ SHOW GRANTS，用来显示授予用户（所有用户或特定用户）的安全权限；   
❑ SHOW ERRORS和SHOW WARNINGS，用来显示服务器错误或警告消息。  

### 3.DISTINCT关键字
使用DISTINCT关键字，顾名思义，此关键字指示MySQL只返回不同的值。  
SELECT DISTINCT vend_id告诉MySQL只返回不同（唯一）的vend_id

### 4.限制结果
SELECT语句返回所有匹配的行，它们可能是指定表中的每个行。为
了返回第一行或前几行，可使用LIMIT子句。下面举一个例子
```sql
SELECT * FROM 表名 LIMIT 5;
```
LIMIT 5, 5指示MySQL返回从行5开始的5行。第一个数为开始
位置，第二个数为要检索的行数。   
所以，带一个值的LIMIT总是从第一行开始，给出的数为返回的行数。
带两个值的LIMIT可以指定从行号为第一个值的位置开始。
```sql
SELECT * FROM 表名 LIMIT 5，5;
```
MySQL 5支持LIMIT的另一种替代语法。LIMIT
4 OFFSET 3意为从行3开始取4行，就像LIMIT 3, 4一样。

### 5.排序数据
子句（clause） SQL语句由子句构成，有些子句是必需的，而
有的是可选的。一个子句通常由一个关键字和所提供的数据组
成。子句的例子有SELECT语句的FROM子句，我们在前一章看到过这个子
句
```sql
SELECT 列名A FROM 表名 ORDER BY 列名B;
```
这条语句除了指示MySQL对B列以字母顺序排序数据  
用非检索的列排序数据是完全合法的。  
#### 5.1 按多个列排序
经常需要按不止一个列进行数据排序。例如，如果要显示雇员清单，
可能希望按姓和名排序（首先按姓排序，然后在每个姓中再按名排序）。
如果多个雇员具有相同的姓，这样做很有用。为了按多个列排序，只要指定列名，列名之间用逗号分开即可（就
像选择多个列时所做的那样）。
```sql
SELECT 列名A FROM 表名 ORDER BY 列名B，列名C;
```
重要的是理解在按多个列排序时，排序完全按所规定的顺序进行。
换句话说，对于上述例子中的输出，仅在多个行具有相同的B
值时才对产品按C进行排序。如果B列中所有的值都是唯一的，则不会按C排序。
#### 5.2 指定排序方向
数据排序不限于升序排序（从A到Z）。这只是默认的排序顺序，还可
以使用ORDER BY子句以降序（从Z到A）顺序排序。为了进行降序排序，
必须指定DESC关键字。
```sql
SELECT 列名A FROM 表名 ORDER BY 列名B DESC;
```
**DESC关键字只应用到直接位于其前面的列名**
```sql
SELECT 列名A FROM 表名 ORDER BY 列名B DESC，列名C;
```
**本章学习了如何用SELECT语句的ORDER BY子句对检索出的数据进行
排序。这个子句必须是SELECT语句中的最后一条子句。**

### 6.WHERE 过滤
表6-1 WHERE子句操作符
操 作 符 说 明

| 操作符| 说明 | 
|-------|-------|
| = | 等于 |
| <> , !=| 不等于|
| < <= > >= | 小于，小于等于，大于，大于等于| 
|BETWEEN | 在指定的两个值之间|
```sql
SELECT * FROM 表名 WHERE 列名 BETWEEN 1 AND 10;
```
#### 6.1 空值检查
在创建表时，表设计人员可以指定其中的列是否可以不包含值。在
一个列不包含值时，称其为包含空值NULL
```sql
SELECT * FROM 表名 WHERE 列名 IS NULL;
```

#### 6.2 组合WHERE子句
为了进行更强的过滤控制，MySQL允许给出多个WHERE子句。这些子
句可以两种方式使用：**以AND子句的方式或OR子句的方式使用**  
使用AND操作符给WHERE子句附加
条件。下面的代码给出了一个例子
```sql
SELECT * FROM 表名 WHERE 列名A = 1 AND 列名B <= 10;
```
```sql
SELECT * FROM 表名 WHERE 列名A = 1 OR 列名B <= 10;
```
**SQL（像多数语言一样）在处理OR操作符前，优先处理AND操
作符,此问题的解决方法是使用圆括号明确地分组相应的操作符。**
#### 6.3 IN操作符
圆括号在WHERE子句中还有另外一种用法。IN操作符用来指定条件范
围，范围中的每个条件都可以进行匹配。IN取合法值的由逗号分隔的清
单，全都括在圆括号中。下面的例子说明了这个操作符：
```sql
SELECT * FROM 表名 WHERE 列名A IN (1000,1001);
```
#### 6.4 NOT操作符
WHERE子句中的NOT操作符有且只有一个功能，那就是否定它之后所
跟的任何条件

### 7.通配符过滤
通配符（wildcard） 用来匹配值的一部分的特殊字符。
#### 7.1 LIKE操作符
##### 7.1.1 百分号（%）通配符
最常使用的通配符是百分号（%）。在搜索串中，%表示任何字符出现
任意次数。例如，为了找出所有以词jet起头的产品，可使用以下SELECT
语句：将检索任意以jet起头的词。%告诉MySQL接受jet之后的任意字符，不管它有多少字符。
```sql
SELECT * FROM 表名 WHERE 列名A LIKE 'jet%';
```
通配符可在搜索模式中任意位置使用，并且可以使用多个通配符。
下面的例子使用两个通配符，它们位于模式的两端：
```sql
SELECT * FROM 表名 WHERE 列名A LIKE '%jet%';
```
搜索模式'%jet%'表示匹配任何位置包含文本jet的值，而
不论它之前或之后出现什么字符。

重要的是要注意到，除了一个或多个字符外，%还能匹配0个字符。%
代表搜索模式中给定位置的0个、1个或多个字符
##### 7.1.2 下划线（_）通配符
另一个有用的通配符是下划线（_）。下划线的用途与%一样，但下划
线只匹配单个字符而不是多个字符。

#### 7.2 使用通配符的技巧
正如所见，MySQL的通配符很有用。但这种功能是有代价的：通配
符搜索的处理一般要比前面讨论的其他搜索所花时间更长。这里给出一些使用通配符要记住的技巧。  
 不要过度使用通配符。如果其他操作符能达到相同的目的，应该
使用其他操作符。  
 在确实需要使用通配符时，除非绝对有必要，否则不要把它们用
在搜索模式的开始处。把通配符置于搜索模式的开始处，搜索起
来是最慢的。  
 仔细注意通配符的位置。如果放错地方，可能不会返回想要的数据

### 8.用正则表达式进行搜索
仅为正则表达式语言的一个子集 如果你熟悉正则表达式，需
要注意：MySQL仅支持多数正则表达式实现的一个很小的子
集。本章介绍MySQL支持的大多数内容
```sql
SELECT * FROM 表名 WHERE 列名A REGEXP '1000';
```
除关键字LIKE被REGEXP替代外，这条语句看上去非常像使用
LIKE的语句。它告诉MySQL：REGEXP后所跟的东西作
为正则表达式（与文字正文1000匹配的一个正则表达式）处理
```sql
SELECT * FROM 表名 WHERE 列名A REGEXP '.000';
```
这里使用了正则表达式  .000。.是正则表达式语言中一个特殊
的字符。它表示匹配任意一个字符，因此，1000和2000都匹配
且返回
#### 8.2 进行OR匹配
为搜索两个串之一（或者为这个串，或者为另一个串），使用|，如
下所示：
```sql
SELECT * FROM 表名 WHERE 列名A REGEXP '1000|2000';
```

#### 8.3 匹配几个字符之一
```sql
SELECT * FROM 表名 WHERE 列名A REGEXP '[123]ton';
```
这里，使用了正则表达式[123] Ton。[123]定义一组字符，它
的意思是匹配1或2或3，因此，1 ton和2 ton都匹配且返回（没
有3 ton）
#### 8.4 匹配范围
集合可用来定义要匹配的一个或多个字符。例如，下面的集合将匹
配数字0到9：
为简化这种类型的集合，可使用-来定义一个范围。下面的式子功能
上等同于上述数字列表：
范围不限于完整的集合，[1-3]和[6-9]也是合法的范围。此外，范
围不一定只是数值的，[a-z]匹配任意字母字符
```sql
SELECT * FROM 表名 WHERE 列名A REGEXP '[1-3]ton';
```

#### 8.5 匹配特殊字符
正则表达式语言由具有特定含义的特殊字符构成。我们已经看到.、[]、|和-等，还有其他一些字符。请问，如果你需要匹配这些字符，应该怎么办呢？例如，如果要找出包含.字符的值，怎样搜索？
```sql
SELECT * FROM 表名 WHERE 列名A REGEXP '\\.';
```
这并不是期望的输出，.匹配任意字符，因此每个行都被检索出
来。  
**为了匹配特殊字符，必须用\\为前导。\\-表示查找-，\\.表示查找.**